# Change Log
All notable changes to this project will be documented in this file.

## [1.35.3] 2025-04-25

### Fixed

- Fix sorting of people lists.
- Sort people models case insensitive (in dropdowns, etc).

## [1.35.2] 2025-02-13

### Fixed

- (CSS) Align menu top-level items to left in alternative menu.

## [1.35.1] 2025-02-13

### Fixed

- Preserve the email message/trailer when moving between pages in the send/print (sales) invoices.

## [1.35] 2024-12-05

### Changed

- Make bank account name field available in customer statement XML output.

## [1.34] 2024-11-21

### Fixed

- Paging of user expenses list.

### Added

- Cashbook, make payment - show person postcode with name to aid identification.
- Add text1 field to CRM activities. To be accessed in user, custom templates.
- Default email messages for output with invoice, statement and remittance can now be customised.

### Changed

- Make bank account name field available in sales invoice XML output.

## [1.33.1] 2024-06-03

### Fixed

- Use correct document type in email subject line to sales order acknowledgement/quote.

## [1.33] 2024-05-31

### Fixed

- Company autogenerated account numbers

### Added

- Populate email address for output of Sales Order and Pro-forma. The email address of Sales Order person (For Attn: of) will be used. Where a person is not set on the order, the company contact email will be used.

### Changed

- Allow unlimited text to be entered in Sales Order header Text1 field.

## [1.32.7] 2024-05-08

### Fixed

- Prevent GRNs from multiple suppliers being selected when creating an invoice.

## [1.32.6] 2024-01-15

### Fixed

- Alternative menu works consistently in Chrome browsers.

## [1.32.5] 2023-11-02

### Fixed

- Viewing a suppliers POs from the purchase ledger now shows only that suppliers POs.
- Logging out when using REMOTE_USER authentication doesn't cause a redirect loop.
- Login failing because of an incorrect, remembered user name.
- Correct row totals in the Structures (Materials) section of the cost sheet.

## [1.32.4] 2023-09-20

### Changed

- Update PLPayments to use DummyPayment class with no payment file output.
  - Payments are created in purchase ledger for the selected purchase invoices.
  - Remittance documents can be sent via email, printed, etc. for each supplier.
  - Note that no payment file is created for upload to your bank when using the DummyPayment injector class. You must process payments manually at your bank. If you need bank integration, please raise it at https://github.com/uzerpllp/uzerp/discussions.

### Added

- New customer account field added to purchase ledger suppliers (local_account_code in database).

## [1.32.3] 2023-07-19

### Changed

- Sales Invoicing, print/post Manual Invoices: updated interface for selecting actions. Adds an option to process all invoices matching the current search criteria.

## [1.32.2] 2023-06-08

### Removed

- System company module permission settings

### Added

- CSV utility library for future use

### Fixed

- Setting user/company debug mode setting to on caused infinite loop and crashed PHP

## [1.32.1] 2023-05-24

### Fixed

- Correct ordering on sales order Item and Order Availability lists.

## [1.32.0] 2023-05-22

### Added

- A despatch action can be selected on sales invoices. This allows control of the despatch action without having to add a sales order first.
- Make more/less lines visible on long orders when collapsing/expanding items in the order header.

### Changed

- New or amended stock items cannot be saved if their code contains any spaces.
- Remember selected search options for purchase order list view.

### Fixed

- Prevent duplicate sales prices (productlines) from being created when amending prices or performing a bulk price change.
- Leaver employee postal addresses were not being removed when deleting personal data.

## [1.31.9] 2023-05-01

### Fixed

- Item cost sheet showing incorrect total cost.

### Changed

- user/theme.css must use CSS variables to change key colours. See assets/css/uzerp/preboot.less

## [1.31.8] 2023-04-24

### Fixed

- Stock item list (index) view: items with zero stock balance had an empty balance value instead of 0.

## [1.31.7] 2023-04-19

### Fixed

- Save and add another button not working correctly on sales and purchase orders.
- Error when on sales order/quote save as new.

## [1.31.6] 2023-04-11

- Minor CSS update to login

## [1.31.5] 2023-04-06

### Added
- View the receive stock action alongside the delivery address when viewing purchase orders.

### Fixed
- Show correct currency symbol on pro-forma invoice output
- Show 'save and add another' button on 'add' type dialogs (e.g. orderline) but not when using the '+' next to data on forms
- Sanitize URL parameters
- Escape some outputs in the sidebar and search from
- Escape cookie values used in login form
- Only use valid columns for order-by when building SQL queries

## [1.31.4] 2023-03-21

### Change
- When viewing a stock item, show all related sales orders instead of using the default order search for new, open, etc.

### Removed
- Browser based printing user setting.

### Fixed
- Incorrect checking of circular reference when substituting item in structure.
- Group permissions could not be saved.
- Search input for text not escaped correctly, causing database error on searches containing '('.
- Default date not set when stock item search is cleared, resulting in an error.
- Stock items show related invoices did not use full width of screen.
- Adding a new person (via dialog) during sales order entry did not work.

## [1.31.3] 2022-09-14

### Changed
- Change to handle empty/missing .env config

## [1.31.2] 2022-09-13

### Changed
- Minor change to config handling

## [1.31.1] 2022-09-13

### Fixed
- Fix database migration indentation

## [1.31.0] 2022-09-13

### Fixed
- Broken layout on employee personal data deletion form.

### Added
- Integration with Twilio Verify to provide a TOTP second factor for logins.
- A country of origin can now be selected for Sales Products. The country can be shown on sales invoice outputs, if required.

## [1.30.1] 2022-08-11

### Fixed
- Editing a sales order with a customer reference resulted in a warning. Changed to only warn if there is more than one order with the same reference.

## [1.30.0] 2022-07-28

### Fixed
- Warehouse Store is not useable if created without a description.
- Disable browser autocomplete on login password input.
- Restrict work order creation to manufactured items

### Added
- Sales productline bulk price change can apply a fixed value to the selected prices, as an alternative to a percentage change.
- Add delivery term to sales invoice
- Phantom assemblies in product structures
  - exploded on transfer to work orders
  - exploded for sales kit picking

### Changed
- Use multi-select to search status in purchase order list view

## [1.29.0] 2022-05-11

### Fixed
- Email subject missing from outputs.
- Manual stock transactions, select default stock item on initial form load.
- Remove OIDS from database tables

## [1.28.2] 2022-03-30

### Fixed
- Small font and low contrast between normal and bold text on Windows.

### Changed
- Remove unnecessary confirmation dialog on sales order 'confirm sale' action.

## [1.28.1] 2022-03-29

### Fixed
- Fix migration

## [1.28] 2022-03-29

### Added
- Include customer product code from sales order product lines in outputs:
  - Sales Order documents
  - Packing Slip
- Select all for output of packing slips. Note that output of multiple pack slips only works when direct printing.

### Fixed
- Some print dialogs will not close when clicking the 'Close' button.

## [1.27.7] 2022-03-15

### Changed
- Require user confirmation for 'Create Invoice' and 'Confirm Sale' actions on sales orders.

## [1.27.6] 2022-02-16

### Added
- Introduce future, touch friendly main navigation using 'mega-dropdowns'. The current nav is the default, new navigation must be enabled in configuration.

### Fixed
- SharedPreferences (user), restrict home page list to modules that user has access to, allowing them to pick one as a default home page.

### Changed
- Updated dependencies

## [1.27.5] 2022-01-06

### Fixed
- Remove inconsistency in sales order lists when viewing from the sales ledger customer.

## [1.27.4] 2022-01-05

### Fixed
- Show sales orders with all statuses when viewing the order list for a specific customer.

## [1.27.3] 2021-12-16

### Fixed
- Batch invoice emails missing subject line.

## [1.27.2] 2021-12-13

### Added
- PHPMailer settings in config to enable sending email via SMTP servers.

### Fixed
- Use correct email address on from/reply-to when sending email.
- Subject line added to customer statement emails.

## [1.27.1] 2021-10-11

### Added
- Reply-to email address for Sales Invoices can be set on the system company by adding an email address tagged 'INVOICE'.

### Fixed
- Add correct email subject to batch sales invoices.

## [1.27] 2021-07-28

### Added
- Allow product groups to be made inactive
- New functionality to allow adjustments to the VAT return before submission.

## [1.26.9] 2021-07-14

### Changed

- Improve usability of global autocomplete search
- Add sales stock to price check uzlet

## [1.26.8] 2021-07-06

### Added

- Review work order outside operation purchases from sidebar
- Improve default PO line descriptions for work order purchases
- Indication of material issue status on work order list
- New manufacturing module preference to complete work orders on booking the order quantity or more
- New manufacturing module preference for Default document selection on new Work Orders

### Changed

- VAT PVA posting allowed to closed GL periods
- MTD fraud prevention headers updated to latest requirements
- Move sales order number to basic search

### Fixed

- Error when reviewing resources on a work order
- Ensure all type codes are available when adding/editing stock items
- Ensure that MF operation costs are saved during cost recalc

## [1.26.7] 2021-03-11

### Added

- Output latest due delivery date in Despatch Note XML

### Changed

- Disable Smarty template compile check when ENVIRONMENT is production
- When ENVIRONMENT is development:
  - redirect errors and warnings a log file
  - turn on ADOdb debug and log messages to a file
  - Turn on compile_check for Smarty templates
  - show Smarty debug console

### Fixed

- Security issues in Smarty
- Use config settings in Memcached connection for database query result cache. From ADOdb 5.22 a prefix will be added to cached queries, allowing them to be cleared from within uzERP.
- Small changes to speed up the system
- Force re-authorisation of the application with HMRC when MTD VAT authorisation grant expires

## [1.26.6] 2021-01-27

### Added

- Allow pro-forma output from Sales Quote.

### Changed

- Show in-progress sales orders (status: new, open an part despatched) by default in the sales order list view.

## [1.26.5] 2021-01-15

### Added

- Allow entry of VAT for PVA invoices in the VAT module

### Fixed

- Set correct current period as default for VAT Journals

## [1.26.4] 2021-01-08

### Fixed

- CRITICAL: VAT Period close posts 0.00 for 'input' tax
- Remove calculation and GL posting of VAT PVA when posting purchase invoice. PVA payments will be collected in the VAT module as the amount specified bu UK customs.

## [1.26.3] 2020-11-26

### Fixed

- Bank account selection empty when making PL/SL payment ot receipt

## [1.26.2] 2020-11-19

### Fixed

- Output of additional contact fields not working on despatch note output

## [1.26.1] 2020-11-17

### Fixed

- Failed migrations

## [1.26] 2020-11-16

### Added

- Support for Postponed VAT Accounting for goods
- Support for VAT Reverse Charge on services
- Allow a VAT status to be inactive (not available when adding new customer or supplier ledger accounts)

### Fixed

- Cashbook payments not saved when entering invalid combination of values with tax rate 'None'
- Cashbook no longer allows payments to inactive companies or people
- Output VAT transactions for the selected period

## [1.25.1] 2020-08-12

### Fixed

- Set initial bank account selections when adding a new purchase ledger supplier
- Inactive contacts were available to choose when creating a new purchase ledger supplier
- Pull in email address, etc. when sending a sales invoice for a customer via email

## [1.25] 2020-08-04

### Added

- Export sales order item availability to CSV file.
- Work Order Return Actions
  - The stock action for Work Order returns can be set by stock item type code
  - Materials can be returned from work orders by using 'Returns' from the sidebar
- Sales kitting
  - New component class 'Sales Kit'
  - 'Sales Kit' stock items have source materials defined as structures (BOM)
  - Kits can be pre-produced to a location for later picking.
  - Picking a sales order line that is a kit item can produce the kit item and backflush materials, or items can be picked from a defined location if pre-produced.
  - Kit items can be unpicked to locations defined on the item's 'return' action.
- Print pre-order requirements for stock items.

### Changed

- Choosing 'Cancel Sales Order' from the sidebar will cancel all lines with status 'NEW', after confirmation.
- Stock Item type code
  - Add comp class to type codes
  - Available type codes on an item depend on the chosen comp class
- Reinstate company relationships in contacts/CRM

### Fixed

- Invoice search returns proper error if invalid information is entered
- Sales order delivery terms now sorted by code
- Use 'statement' email address, defined on the system company, when emailing customer account statements.
- Permission editing
  - Action not saved and loaded correctly when editing permission.
  - Extra parameters not saved for permission.

- Corrected encoding of Making Tax Digital fraud protection headers, where required, and added 'Gov-Client-Local-IPs' and 'Gov-Client-MAC-Addresses'. See: https://developer.service.hmrc.gov.uk/api-documentation/docs/fraud-prevention

## [1.24] 2020-03-19

### Fixed

- Delivery VAT number and notes lookup

## [1.23] 2020-03-16

### Fixed

- Problems with paging

## [1.22.1] 2020-03-16

### Added

- Printing pallet labels

## [1.22] 2020-03-09

### Added

- Addresses have additional fields, which are also added to the output XML for Sales Orders/Invoices:
  - Vat Number: holds the VAT number of the organisation receiving the goods where this differs from the invoiced organisation. This is only relevant for 'shipping' addresses.
  - Notes: additional notes
- Additional text fields (text1, text2, text3) added to the Sales Order header for general use.
- Additional information added to 'extra' section of the output XML for Sales Orders/Invoices containing:

  ```
  <delivery_address_name>NAME</delivery_address_name>
  <delivery_address_vatnumber>VATNUMBER</delivery_address_vatnumber>
  <delivery_address_notes>TEXT</delivery_address_notes>
  <sales_order_header_text1>TEXT</sales_order_header_text1>
  <sales_order_header_text2>TEXT</sales_order_header_text2>
  <sales_order_header_text3>TEXT</sales_order_header_text3>
  ```
- Invoice print layouts can be chosen for each customer:
  1. Define a 'private' report type for invoice layouts
  2. Add additional report definitions for invoices, tagged with the report type above and set 'user defined' (do not add a report type to 'SalesInvoice', it is the default)
  3. In Setup > Ledger Setup > Setup, choose the report type to be used for invoicing
  4. Edit a sales ledger customer to choose a custom invoice layout

### Changed

- Intrastat sales reports use country of delivery address

## [1.21] 2020-02-19

### Fixed

- Errors when removing employee contact details.
- Error when trying to use companies in categories view.

## [1.20] 2020-02-17

### Fixed

- Deleting of contact records for companies, people and leads

### Added

- Category list view for companies to generate lists of customers or suppliers
- Allow setting of end/inactive date for companies and people (ending company also sets end date on associated people)
- Company and associated people are set inactive when an Sales/Purchase ledger entry is made inactive
- Filter company and person list views by active/inactive status
- Inactive people not available when entering sales orders, invoices or credit notes
- User confirmation when deleting companies, people and leads
- Personal data deletion for employees that have left

### Removed

- Company branches, or parent/child relationships
- Categories on people
- Contact sharing options

### Changed

- The label 'Accounts' on the contacts menu has changed to 'Companies'
- SL/PL master delete and inactive actions require confirmation

## [1.19.3] 2020-01-17

### Fixed

- Output correct required quantities on the Work Order structure document

### Added

- Logging of user authorisation events and Making Tax Digital return submissions

## [1.19.2] 2020-01-07

### Fixed

- Set despatched quantity to zero when saving and existing sales order/quote as new

## [1.19.1] 2019-12-18

### Fixed

- Ensure that the correct UOMs are available when editing an item structure (BOM) line

## [1.19] 2019-12-11

### Fixed

- Print output from employee holiday list
- Get initial currency from the source transaction when refunding in the cash book
- Ensure that output containing '<' character can print
- Ensure that GL journal transactions are tagged with the correct type
- Constrain employee dropdown by pay period frequency in employee payments
- Re-introduce manufactured item structure substitution
- Error when sorting Purchase Order Received Lines view by item description

### Changed

- Add more search options to employee holiday list

### Removed

- Debug option UI setting for system company
- Calendar module

## [1.18.3] 2019-11-22

### Fixed

- SO product prices missing from 'related items' sidebar on Stock Items
- Return to Stock Item Work Orders view after adding Work Order from sidebar
- Completely hide 'print' column in work order list unless enabled in MF module settings

## [1.18.2] 2019-11-21

### Fixed

- Fix holiday requests calendar UI interactions
  - Click a day or select a range of dates to add holiday request
  - Right click to approve, cancel or decline a request

### Added

- Enable switching to list view from holiday requests calendar

## [1.18.1] 2019-11-12

### Added

- Incorporate sales and purchase product commodity codes in VAT reporting for Intrastat

## [1.18] 2019-11-04

### Added

- Year-end opening balance GL journals

### Fixed

- Prevent adding of holiday requests/entitlement expenses and training plans for employee leavers
- Filter out employee leavers when creating cashbook transaction
- Hide inactive suppliers when creating invoice from GRN
- Do not allow obsolete items to be chosen for stock transactions
- Clicking an item when viewing location balances now shows the transactions for that item only
- Ensure netVatDue is not negative when posting a VAT return via MTD

## [1.17] 2019-06-26

**Testing Release**

### Fixed

- Sales Summary uzLET is now responsive
- Corrected column header alignment on Aged Debtors Summary uzLET
- Chart widgets can be scrolled horizontally on small screens
- Exclude sales quotations from supply/demand views
- Sort company and person addresses on drop-downs
- Show correct stock transactions for dates selected in search

### Changed

- Removed reliance on uzERP ADODB fork and updated dependency to use upstream releases

### Added

- Add Gov-Client-Device-ID header to Making Tax Digital VAT interactions
- Documents attached to stock items can be selected to be printed with work orders for the item.
- Search for manufacturing product groups

### Removed

- The password strength meter has been removed

## [1.16] 2019-05-24

**Testing Release**

### Added

- Time based operation costing
    - Select *cost basis* for Stock Items, *volume* or *time*
    - Operation entry/edit forms respond to the item cost basis
    - New Manufacturing module settings:
        - Default units for operation volume/time
        - Default cost basis for new Stock Items
        - Use only the default cost basis for new Stock Items

- Manufacturing operations can be marked as batch operations, causing the per item labour and overhead cost to be divided by the item's batch size (if set).

- Manufacturing Centres have an *Available Qty* field. This can be used to indicate the number of machines of a type available, for example. This number has no effect in uzERP, but may be used by external planning tools like frePPLe.

- Outside operations can be placed in the manufactured item routing with a lead time and linked to a purchase product line that holds supplier and price information.
    - The outside operation supplier(s) are available to print on the operations/route card output.
    - Outside operation purchasing - purchase against work order routing outside operations, using the *Add Work Order Purchase* from the purchase order side-bar.
    - New Manufacturing module settings:
        - Product Group for routing outside operation purchases, all outside op purchase product lines must be linked to the chosen product group.
        - Work Centre for routing outside operations, the work centre used in work order operations.
        - Resource for routing outside operations, the MF resource for outside operations.

- Integration with frePPLe - the open source, production planning and scheduling solution - https://frepple.com:
    - Import Work Orders, Sales & Purchase Orders, inventory, etc. from uzERP into frePPLe to generate planned work orders and purchase orders.
    - Export selected orders or a complete plan back in to uzERP for execution.
        - Planned purchase review and order creation - lists planned purchase requirements directly in uzERP, create purchase orders for individual items or group them on one purchase order.
        - Work orders are created directly in uzERP from frePPLe, with start dates, ready to release.
    - See our frePPLe connector: https://github.com/uzerpllp/uzerpfrepple.

- Delayed/Async Jobs
    - Tasks can now be queued and run by a worker in the background
    - Latest cost recalculation and cost roll-over have been moved to jobs

### Changed

- Allow printing of Work Order documentation from the Work Order list view.
    - Work Order documents can be printed ahead of release or re-printed while open.
    - Printing at release time, by selecting both 'release' and 'print'.
    - This option must be enabled in the Manufacturing module preferences found under Setup > Manufacturing Setup > MF Module Preferences.

- Updated workflow for Operations, Outside Operations and Structures
    - New sidebar group for ops, structures and costing when viewing a stock item
    - One click to view the current ops, structure, etc.
    - Clicking on the op or structure line number will show the edit form
    - All forms have 'Save and Add...' buttons to speed up data entry
    - Form 'cancel' links allow easy return to the ops/structure list for the item

### Fixed

- Ensure email address string is displayed correctly in print/output dialog
- Sales price check uzLET failed ajax requests

## [1.15.2] 2019-05-13

- Fix error when viewing product list under product selector level.
- Allow multiple recipients, separated by a comma, to be added when outputting to email.

## [1.15.1] 2019-04-23

- Minor bug fix

## [1.15] 2019-04-23

### Added

- Functions added to phinx UzerpMigration base class to make adding/removing module components easier.

### Changed

- Main VAT return view now allows listing and searching for returns and is not restricted to a single return.
- All actions related to individual VAT returns (period close, submit, etc.) have been moved to the individual return view.

### Fixed

- Prevent Making Tax Digital re-authorisation on Oauth2 access token expiry.
- VAT transaction reports can be output to CSV, print, email, etc.

## [1.14.1] 2019-04-10

- Minor fixes for PHP 7.1+ compatibility
- Move VAT reports to VAT Return View

## [1.14] 2019-03-25

Support for Making Tax Digital for VAT

## [1.13] 2019-02-11

### Added

VAT Report views can be output to CSV by using the 'Output' button in the search area.

### Fixed

VAT Report views and transaction printing updated to use new calculations, matching the VAT return.

## [1.12.3] 2018-12-12

### Added

- Add Sales Order module preference to show current pickable stock balance when entering new order lines

### Fixed

- Product selector links added at wrong level of the hierarchy
- Use of pdftk for PDF merging replaced by qpdf. pdftk no longer available in Ubuntu 18.04 repos

### Changed

- The 1.12.3 release package contains an update to the ADODB database library, making it compatible with PHP 7.1

## [1.12.2] 2018-11-12

### Fixed

- Use PHPMailer for user emails

## [1.12.1] 2018-11-09

### Changed

- Use PHPMailer class to send email from uzERP

### Fixed

- Prevent error when viewing Cashbook Account details, See [issue 181](https://github.com/uzerpllp/uzerp/issues/181).

## [1.12] 2018-09-06

### Changed

- Move EAN number to sales product header and add validation
- Remove EAN from purchased productlines
- Move dashboard edit link

### Fixed

- Item cloning
  - Clear EAN when cloning an item with a sales product
  - Concatenate new item number and description as new sales product description
- Set default GL centre from product header when entering a new sales or purchase product
- Prevent hidden model fields from being selected for display in data grids

### Added

- Make Order detail, EAN number, stock item code and customer code available to sales order item labels
- Commodity code field for sales and purchased product headers

## [1.11] 2018-08-08

### Changed

- Dashboards now use CSS grid layout
- Quicklinks have been removed from all dashboards
- VAT
  - Add facility to pay/receive VAT via the cashbook
  - Move closing the VAT period to a separate action
  - Performance improvements 

### Fixed

- When editing uzLETs on a dashboard the listed order is the same as the display order
- The Home dashboard will not display any uzLETs until the user sets their preferred list
- 'Top 10' Sales uzLETs not restricted to products linked to stock items

## [1.10.4] 2018-07-19

### Fixed

- Set correct billing and shipping address when creating an order directly from a company/person

## [1.10.3] 2018-07-11

### Added

- Validate billing and shipping address selection on sales orders when saving.

## [1.10.2] 2018-04-08

### Changed

- Remove the ability to change the productline selection when editing Sales an Purchase Order lines to preserve the link when prices are updated.

## [1.10.1] 2018-01-03

### Fixed

- Minor bug fixes.

## [1.10] 2017-12-30

### Fixed
- Remove the ability to print work order documents for an unreleased work order.
- All cookies have flags set based on values from php.ini, e.g. secure, HttpOnly.

### Added
- Click info provides a way of showing additional information to the user in uzERPâ€™s grids without having to click through to the underlying data view. See: https://doc.uzerp.com/Setup/Model-Customisation#model-customisation_click-info.
- Enable tagging of reports.
- Add costs for SO Products that are not linked to a Stock Item, allows margin reporting against non-stocked products.

## Changed
- Useful utility files moved to /utils directory.

## [1.9.1] 2017-11-24

### Fixed
- Posted accrual journals not updating GL balances (regression).
- Correct payment terms belongsTo reference on SInvoice model. Prevents database error when adding display field.
- Show item description when creating invoice from GRN.

## [1.9] 2017-09-04

### Fixed

- Multi Bin Balances Print uzLET now sends a CSRF token with its form data.
- Javascript error when adding a new Periodic Payment.
- Posting supplier journal always fails with 'Cannot post journal to a control account'.
- Use customer currency in aged analysis on statements.

### Added

- Product Management improvements
    - Update linked product and productline descriptions when editing Stock Item or SO/PO Product.
    - Clone sales products and product lines with stock item
- Free-text fields on Company Contact record (text1, text2), for user use.
- Show pickable stock balance when viewing an item

### Changed

- Move Sentry client config into uzERP config file.
- Allow user theme.css to have a suffix for browser cache-busting. e.g. add the date to the filename when changed -- theme-20170727.css.

## [1.8.2] 2017-07-14

### Fixed

- Prevent further GRNs being created for part received purchase orders that have reverted to requisitions.

- Product selector fixes
    - Show all currently linked targets when amending component list
    - Allow scrolling of component list
    - Return to the item being edited after saving links


### Added

- Site specific Works Order document injector classes are loaded from user/classes
- WOOperationsReport injector class, e.g. to produce a route card document with operations (define a report definition with Name = wo_operations). Add the class in Setup > System Admin > Injector Classes, as required.
- Site specific modules can be created in user/modules

### Changed

- Works Order documents can be selected, then printed or viewed
- Works Order documents can be sent to a selected printer

## [1.8.1] 2017-06-08

### Fixed

- Allow gulp to be run using 'npm run gulp'

### Added

- Add jquery.watermark.js, used by autocomplete fields

### Changed

- Replace clear_memcached.php script with flush_memcached.php

## [1.8] 2017-05-27

### Fixed

- Adding a holiday request now uses the correct allocation period.
- Resetting user passwords now sends email notifications.
- Error when cancelling Sales Order product selector actions.
- Prevent users from seeing and acting on expenses of other employees that they are not authorisers for.
- Ensure that a GL transaction cannot be saved to a closed period.
- Pre-populate correct GL Account and Centre combination when displaying the Cashbook transaction refund form.
- Prevent posting of Sales and Purchase Ledger journals to control accounts.
- Prevent posting of invoice templates.
- Replace functions removed in PHP7.

### Added

- Delete action for Sales Order product selectors.

### Changed

- Javascript and less/css is now complied at build time.
    - Use grunt.js to build static assets.
    - Remove /theme and /data/resource_c directories.
    - Remove resource.php and let web server serve static assets.
    - Create /user/theme.css for custom colours, etc.

### Removed

- Manual status change on HR expense actions.

## [1.7.1] 2016-12-13

### Fixed

- Error when saving new CRM activity

## [1.7] - 2016-12-07

### Fixed

- Various Sales Order product selector fixes

### Added

- Print item labels from Sales Order. Requires a Report Definition called 'SOItemLabel'
- Transfer outstanding Sales Order lines to a new order (cancels existing lines)
- View line notes from the Sales Order sidebar
- Show person in Periodic Payments list
- Require confirmation on cancel and authorise Purchase Requisition actions
- A note can be added when setting a Customer Service Failure code
- Custom model sort (see: http://wiki.uzerp.com/doku.php/dev_guide#custom_sort_in_views) allows the default view sorting to be changed.

### Changed

- Security
    - Passwords are hashed using PHP 5.5+ Password hashing API
        - New passwords must now be at least 10 characters long but existing passwords remain unchanged.
        - A password strength meter has been added to encourage password complexity
    - Stronger CSRF protection
- New usernames can only contain lower-case letters and/or numbers.

### Removed
- Unused PHPBarcode library

## [1.6.2] - 2016-05-23

### Fixed

- Error on 'save as new' in sales orders
- Error on 'save as new credit' from sales invoice
- Error on adding a new credit note from customer view
- Sort sales order list when linking purchase order
- Ensure that CRM activity attachments are only listed on their own activity

### Added

- UI to allow deletion of contact notes
- Optional stop controls to prevent creation of sales orders, quotes and templates while a customer account is on stop
- Show note form when placing a customer account on stop

## [1.6.1] - 2016-04-07

### Fixed

- Load correct address when creating new sales order for a person
- Add project_id to SO product views
- Fix product search not returning items when adding sales order lines
- Use concurrency control when updating GL Balances

### Added

- Add customer account number to sales order acknowledgement XML output
- Add customer account and sales order number to purchase order XML output
- Add customer account number to invoice XML output

## [1.6] - 2016-02-16

### Fixed

- Setting a custom theme now uses that theme instead of the default
- Sales order add-line was showing multiple prices for an item
- LDAP login fails if user or system company access disabled
- Prevent Apache FOP errors by encoding less-than '<' as `&#60;` in XML output data

### Added

- Allow Sales Invoices to be allocated to Projects and Tasks
- Works order view from Projects
- Add audit fields to projects
- Add the ability to purchase orders and invoices from a task
- New injector classes for optional LDAP authentication with Apache
- Add a notes field to sales order line input. Not printed on outputs by default
- Purchase orders can be linked to a sales order
- Purchase order delivery address can be sourced from a linked sales order, for output only
- Despatch notes can be created for non-stock product lines
- Products can be marked as 'not despatchable', i.e. their product lines can't be added to despatch notes
- Sales order lines can be released and added to a despatch note for the sales order sidebar
- Purchase order schedule document print
- Site-wide preference to list all purchase orders, instead of only those raised by the logged in user.
- Improvements to CRM Activities
- Statement date and page shown in cashbook transactions view
- Sales orders/quotes list and 'new' action from Person side-bar

### Changed

- Simplify template for getting opportunity details from a project
- Phinx migrations moved to schema/phinx/migrations
- Project Budget Controller to show budgets correctly

### Removed

- Unnecessary action in the Task sidebar removed
- Redundant EGS reports from projects


## [1.5.2] - 2015-05-15

### Fixed

- Report module not working

### Changed

- adodb will be installed from our fork of v5.18 at https://bitbucket.org/uzerp/adodb

## [1.5.1] - 2015-04-09

### Changed

- Make changelog more useful to users - [keepachangelog.com](http://keepachangelog.com/)
- Modify Sales Invoice VAT handling for Prompt Payment Discounts to agree with new UK legislation, [HMRC Brief 49 (2014): VAT - Prompt Payment Discounts](https://www.gov.uk/government/publications/revenue-and-customs-brief-49-2014-vat-prompt-payment-discounts/revenue-and-customs-brief-49-2014-vat-prompt-payment-discounts)
  - Stage 1 - Don't adjust invoice VAT/net, store gross discount

### Added

- Add an option to sales orders to print an address label. You will need to add a permission for controller: SordersController, action: printAddressLabel and create a Report Definition called 'SOAddressLabel'.

## [1.5.0] - 2015-03-20

### Fixed

- View purchase orders/invoices while viewing a PO Product Line

### Changed

- adodb and less-php libraries must now be installed via [composer](https://getcomposer.org/) and not distributed in the *plugins* folder.

## [1.4.0] - 2015-03-10

### Fixed

- A person added without a company link will now be visible in the list of people

### Added

- Controller smarty templates can be overridden by users
- Support for logging to [Sentry](https://getsentry.com/)

### Changed

- The smarty php library must now be installed via [composer](https://getcomposer.org/) and not distributed in the *plugins* folder.

## [1.3.11] - 2015-02-17

### Fixed

- Stop Sales Invoice being created for customers on stop

### Added

- Allow empty sales orders to be cancelled

## [1.3.10] - 2015-01-20

### Fixed

- Closing final period of year fails when trying to update assets

### Added

- Make VAT amounts available to Sales Order Acknowledgement print

## [2014.3.9] - 2014-12-01

### Fixed

- Warehouse locations without GL Accounts should be visible
- Empty response when selecting User Space Tables from the menu
- When editing a task the project should not be changed
- Add NOT NULL constraint on project_id column in tasks table

### Added

- Make admin from email address configurable

### Changes to Projects Module

- Changes expenses to link to make task selection dependent on project selection in expenses header
- Add project tasks to purchase order header and make dependent on project. Also fix small annoyance where address heading incorrect on view.
- Add Purchase orders sidebar link on projects
-  Changes to allow projects and tasks in entered purchase invoices

## [2014.3.8] - 2014-10-09

### Fixed

- CSV outputs are empty

### Changes to Projects Module

- Changes to projects module
- Tidy up projects controller:
  - Removed code for old ezPDF 'reports' that no longer work
  - Removed deprecated actions for a project
  - Changed view sidebar actions (added go to and add projects under actions)
- Tidy up the projects entry and display screen:
  - Set project identifier to be job_no+name
  - Remove RAG status from view template (code left in controller as may be useful)
  - Remove edit template as not required
  - Update new template so can be used for edits as well
- Minor changes to template new.tpl
- Update so that a project can be marked as complete and the status is changed to 'C'. Doesn't change any other validations yet.
- Another change to the template to get the fields in the correct order
- Tidy up the Project Task sidebar so in the same basic order as Projects Remove calendar views as they don't currently work
- Change the order of Project Budget Item Type to Materials, Equipment, Resources, Other
- Small change to opportunity search
- Fixed bug re opportunity identifier field not displaying in drop down correctly
- Change to tasks template when adding from a project
- Fixed Bug to limit person dropdown when allocating task hours.
  - When entering task hours person dropdown now only shows people from the system company 
  - Note - this means that 'non employees' can still book hours IF they are in the system company as people.
- Fixed Bug to limit person dropdown when setting up resource templates
- Fixed bug on task hours total in View Task Totals
- Changes to the way project module handles resources
- Fixed bug which allowed hours with no employee also removed overtime checkbox as deprecated
- To add value to opportunities and products plus tidy up lik 'opportunity to project'
- Add database migration for project module updates
								  
## [2014.3.7] - 2014-09-15

### Fixed

- Duplicate NI number should be allowed in combination with finish date in HR - New Employee

## [2014.3.6] - 2014-09-09

### Fixed

- Regression in report definitions
- VAT totals incorrect on Sales Order Quote print
- Error adding periodic payment for Sales/Purchase Ledger Source

### Added

- Show person name on Sales Quote print

## [2014.3.5] - 2014-08-20

### Fixed

- Broken link on view purchase order supply/demand
- Parentheses around address fields cause SQL error

### Added

- Print company bank account details on pro-forma invoice
- Show customer phone numbers on confirm sale
- Show line due dates on sales order acknowledgement
- Show sales order number on sales invoice

## [2014.3.4] - 2014-07-22

### Fixed

- Remove call by reference outside function definitions for PHP 5 compatibility

## [2014.3.3] - 2014-07-08

### Added

- Open up project job number for editing and enhance the search options

## [2014.3.2] - 2014-06-24

### Added

- Allow selection of a custom XSL report definition for reports.

## [2014.3.1] - 2014-06-11

### Fixed

- Sales Order Acknowledgement Print, lines overwrite header
- CRM Activities view loads calendar instead of activities
- Adding a project fails due to system policy error
- OS Value on batch payments not being set to zero

### Added

- Use [composer](https://getcomposer.org/) to install PHP libs
- phinx for database migrations


[1.35.3]: https://github.com/uzerpllp/uzerp/compare/1.35.2...1.35.3
[1.35.2]: https://github.com/uzerpllp/uzerp/compare/1.35.1...1.35.2
[1.35.1]: https://github.com/uzerpllp/uzerp/compare/1.35...1.35.1
[1.35]: https://github.com/uzerpllp/uzerp/compare/1.34...1.35
[1.34]: https://github.com/uzerpllp/uzerp/compare/1.33.1...1.34
[1.33.1]: https://github.com/uzerpllp/uzerp/compare/1.33...1.33.1
[1.33]: https://github.com/uzerpllp/uzerp/compare/1.32.7...1.33
[1.32.7]: https://github.com/uzerpllp/uzerp/compare/1.32.6...1.32.7
[1.32.6]: https://github.com/uzerpllp/uzerp/compare/1.32.5...1.32.6
[1.32.5]: https://github.com/uzerpllp/uzerp/compare/1.32.4...1.32.5
[1.32.4]: https://github.com/uzerpllp/uzerp/compare/1.32.3...1.32.4
[1.32.3]: https://github.com/uzerpllp/uzerp/compare/1.32.2...1.32.3
[1.32.2]: https://github.com/uzerpllp/uzerp/compare/1.32.1...1.32.2
[1.32.1]: https://github.com/uzerpllp/uzerp/compare/1.32.0...1.32.1
[1.32.0]: https://github.com/uzerpllp/uzerp/compare/1.31.9...1.32.0
[1.31.9]: https://github.com/uzerpllp/uzerp/compare/1.31.8...1.31.9
[1.31.8]: https://github.com/uzerpllp/uzerp/compare/1.31.7...1.31.8
[1.31.7]: https://github.com/uzerpllp/uzerp/compare/1.31.6...1.31.7
[1.31.6]: https://github.com/uzerpllp/uzerp/compare/1.31.5...1.31.6
[1.31.5]: https://github.com/uzerpllp/uzerp/compare/1.31.4...1.31.5
[1.31.4]: https://github.com/uzerpllp/uzerp/compare/1.31.3...1.31.4
[1.31.3]: https://github.com/uzerpllp/uzerp/compare/1.31.2...1.31.3
[1.31.2]: https://github.com/uzerpllp/uzerp/compare/1.31.1...1.31.2
[1.31.1]: https://github.com/uzerpllp/uzerp/compare/1.30.0...1.31.1
[1.31.0]: https://github.com/uzerpllp/uzerp/compare/1.30.1...1.31.0
[1.30.1]: https://github.com/uzerpllp/uzerp/compare/1.30.0...1.30.1
[1.30.0]: https://github.com/uzerpllp/uzerp/compare/1.29.0...1.30.0
[1.29.0]: https://github.com/uzerpllp/uzerp/compare/1.28.2...1.29.0
[1.28.2]: https://github.com/uzerpllp/uzerp/compare/1.28.1...1.28.2
[1.28.1]: https://github.com/uzerpllp/uzerp/compare/1.28...1.28.1
[1.28]: https://github.com/uzerpllp/uzerp/compare/1.27.7...1.28
[1.27.7]: https://github.com/uzerpllp/uzerp/compare/1.27.6...1.27.7
[1.27.6]: https://github.com/uzerpllp/uzerp/compare/1.27.5...1.27.6
[1.27.5]: https://github.com/uzerpllp/uzerp/compare/1.27.4...1.27.5
[1.27.4]: https://github.com/uzerpllp/uzerp/compare/1.27.3...1.27.4
[1.27.3]: https://github.com/uzerpllp/uzerp/compare/1.27.2...1.27.3
[1.27.2]: https://github.com/uzerpllp/uzerp/compare/1.27.1...1.27.2
[1.27.1]: https://github.com/uzerpllp/uzerp/compare/1.27...1.27.1
[1.27]: https://github.com/uzerpllp/uzerp/compare/1.26.9...1.27
[1.26.9]: https://github.com/uzerpllp/uzerp/compare/1.26.8...1.26.9
[1.26.8]: https://github.com/uzerpllp/uzerp/compare/1.26.7...1.26.8
[1.26.7]: https://github.com/uzerpllp/uzerp/compare/1.26.6...1.26.7
[1.26.6]: https://github.com/uzerpllp/uzerp/compare/1.26.5...1.26.6
[1.26.5]: https://github.com/uzerpllp/uzerp/compare/1.26.4...1.26.5
[1.26.4]: https://github.com/uzerpllp/uzerp/compare/1.26.3...1.26.4
[1.26.3]: https://github.com/uzerpllp/uzerp/compare/1.26.2...1.26.3
[1.26.2]: https://github.com/uzerpllp/uzerp/compare/1.26.1...1.26.2
[1.26.1]: https://github.com/uzerpllp/uzerp/compare/1.26...1.26.1
[1.26]: https://github.com/uzerpllp/uzerp/compare/1.25.1...1.26
[1.25.1]: https://github.com/uzerpllp/uzerp/compare/1.25...1.25.1
[1.25]: https://github.com/uzerpllp/uzerp/compare/1.24...1.25
[1.24]: https://github.com/uzerpllp/uzerp/compare/1.23...1.24
[1.23]: https://github.com/uzerpllp/uzerp/compare/1.22...1.23
[1.22.1]: https://github.com/uzerpllp/uzerp/compare/1.22...1.22.1
[1.22]: https://github.com/uzerpllp/uzerp/compare/1.21...1.22
[1.21]: https://github.com/uzerpllp/uzerp/compare/1.20...1.21
[1.20]: https://github.com/uzerpllp/uzerp/compare/1.19.3...1.20
[1.19.3]: https://github.com/uzerpllp/uzerp/compare/1.19.2...1.19.3
[1.19.2]: https://github.com/uzerpllp/uzerp/compare/1.19.1...1.19.2
[1.19.1]: https://github.com/uzerpllp/uzerp/compare/1.19...1.19.1
[1.19]: https://github.com/uzerpllp/uzerp/compare/1.18.3...1.19
[1.18.3]: https://github.com/uzerpllp/uzerp/compare/1.18.2...1.18.3
[1.18.2]: https://github.com/uzerpllp/uzerp/compare/1.18.1...1.18.2
[1.18.1]: https://github.com/uzerpllp/uzerp/compare/1.18...1.18.1
[1.18]: https://github.com/uzerpllp/uzerp/compare/1.17...1.18
[1.17]: https://github.com/uzerpllp/uzerp/compare/1.16...1.17
[1.16]: https://github.com/uzerpllp/uzerp/compare/1.15.2...1.16
[1.15.2]: https://github.com/uzerpllp/uzerp/compare/1.15.1...1.15.2
[1.15.1]: https://github.com/uzerpllp/uzerp/compare/1.15...1.15.1
[1.15]: https://github.com/uzerpllp/uzerp/compare/1.14.1...1.15
[1.14.1]: https://github.com/uzerpllp/uzerp/compare/1.14...1.14.1
[1.14]: https://github.com/uzerpllp/uzerp/compare/1.13...1.14
[1.13]: https://github.com/uzerpllp/uzerp/compare/1.12.3...1.13
[1.12.2]: https://github.com/uzerpllp/uzerp/compare/1.12.1...1.12.2
[1.12.1]: https://github.com/uzerpllp/uzerp/compare/1.12...1.12.1
[1.12]: https://github.com/uzerpllp/uzerp/compare/1.11...1.12
[1.11]: https://github.com/uzerpllp/uzerp/compare/1.10.4...1.11
[1.10.3]: https://github.com/uzerpllp/uzerp/compare/1.10.2...1.10.3
[1.10.2]: https://github.com/uzerpllp/uzerp/compare/1.10.1...1.10.2
[1.10.1]: https://github.com/uzerpllp/uzerp/compare/1.10...1.10.1
[1.10]: https://github.com/uzerpllp/uzerp/compare/1.9.1...1.10
[1.9.1]: https://github.com/uzerpllp/uzerp/compare/1.9...1.9.1
[1.9]: https://github.com/uzerpllp/uzerp/compare/1.8.2...1.9
[1.8.2]: https://github.com/uzerpllp/uzerp/compare/1.8.1...1.8.2
[1.8.1]: https://github.com/uzerpllp/uzerp/compare/1.8...1.8.1
[1.8]: https://github.com/uzerpllp/uzerp/compare/1.7.1...1.8
[1.7.1]: https://github.com/uzerpllp/uzerp/compare/1.7...1.7.1
[1.7]: https://github.com/uzerpllp/uzerp/compare/1.6.2...1.7
[1.6.2]: https://github.com/uzerpllp/uzerp/compare/1.6.1...1.6.2
[1.6.1]: https://github.com/uzerpllp/uzerp/compare/1.6...1.6.1
[1.6]: https://github.com/uzerpllp/uzerp/compare/1.5.2...1.6
[1.5.2]: https://github.com/uzerpllp/uzerp/compare/1.5.1...1.5.2
[1.5.1]: https://github.com/uzerpllp/uzerp/compare/1.5.0...1.5.1
[1.5.0]: https://github.com/uzerpllp/uzerp/compare/1.4.0...1.5.0
[1.4.0]: https://github.com/uzerpllp/uzerp/compare/1.3.11...1.4.0
[1.3.11]: https://github.com/uzerpllp/uzerp/compare/1.3.10...1.3.11
[1.3.10]: https://github.com/uzerpllp/uzerp/compare/2014.3.9...1.3.10
[2014.3.9]: https://github.com/uzerpllp/uzerp/compare/2014.3.8...2014.3.9
[2014.3.8]: https://github.com/uzerpllp/uzerp/compare/2014.3.7...2014.3.8
[2014.3.7]: https://github.com/uzerpllp/uzerp/compare/2014.3.6...2014.3.7
[2014.3.6]: https://github.com/uzerpllp/uzerp/compare/2014.3.5...2014.3.6
[2014.3.5]: https://github.com/uzerpllp/uzerp/compare/2014.3.4...2014.3.5
[2014.3.4]: https://github.com/uzerpllp/uzerp/compare/2014.3.3...2014.3.4
[2014.3.3]: https://github.com/uzerpllp/uzerp/compare/2014.3.2...2014.3.3
[2014.3.2]: https://github.com/uzerpllp/uzerp/compare/2014.3.1...2014.3.2
[2014.3.1]: https://github.com/uzerpllp/uzerp/compare/2014.3...2014.3.1
